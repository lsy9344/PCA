2025-06-30 16:01:17,758 - INFO - [B] 쿠폰 자동화 시작 - 차량번호: 0280, 매장: B
2025-06-30 16:01:26,744 - INFO - [성공] B 매장 로그인 성공
2025-06-30 16:01:28,817 - INFO - [성공] 안내 팝업 처리 완료
2025-06-30 16:01:28,845 - INFO - [검색] 검색 상태 유지 체크박스 발견 - 현재 상태: 체크됨
2025-06-30 16:01:28,846 - INFO - [정보] 검색 상태 유지 체크박스 이미 활성화됨
2025-06-30 16:01:28,847 - INFO - [테스트] 입차일 설정 시작
2025-06-30 16:01:28,864 - INFO - [성공] 입차일 입력 필드 발견: text=입차일
2025-06-30 16:01:36,596 - INFO - [성공] 입차일 '2025-06-10' 설정 완료
2025-06-30 16:01:40,758 - INFO - [성공] 차량번호 '0280' 검색 성공
2025-06-30 16:01:40,759 - INFO - [성공] B 매장 무료 쿠폰은 항상 보유: 999개
2025-06-30 16:01:40,775 - INFO - [성공] 현재 페이지에서 남은잔여량 발견: 
												남은잔여량
												
													20,400 원
												
											
2025-06-30 16:01:40,776 - INFO - [성공] 남은잔여량: 20400원 → 유료 30분할인 (판매 : 300 ) 68개
2025-06-30 16:01:40,777 - INFO - [성공] 현재 페이지에서 남은잔여량 확인: 
												남은잔여량
												
													20,400 원
												
											
2025-06-30 16:01:40,778 - INFO - [분석] 할인 내역 테이블 분석 시작
2025-06-30 16:01:40,783 - INFO - [분석] 할인 데이터 행 수: 4
2025-06-30 16:01:40,826 - INFO - [분석] 데이터 행 2: ['1', '유료 30분할인', '215(이수열)', '2025-06-30 15:28:58.77', '']
2025-06-30 16:01:40,827 - INFO - [분석] 할인 데이터: 순번=[1] 할인값=[유료 30분할인] 등록자=[215(이수열)] 시간=[2025-06-30 15:28:58.77]
2025-06-30 16:01:40,827 - INFO -    [매장] 우리 매장 할인: PAID_30MIN - 215(이수열) (2025-06-30 15:28:58.77)
2025-06-30 16:01:40,861 - INFO - [분석] 데이터 행 3: ['2', '유료 30분할인', '215(이수열)', '2025-06-30 15:28:50.6', '']
2025-06-30 16:01:40,862 - INFO - [분석] 할인 데이터: 순번=[2] 할인값=[유료 30분할인] 등록자=[215(이수열)] 시간=[2025-06-30 15:28:50.6]
2025-06-30 16:01:40,862 - INFO -    [매장] 우리 매장 할인: PAID_30MIN - 215(이수열) (2025-06-30 15:28:50.6)
2025-06-30 16:01:40,890 - INFO - [분석] 데이터 행 4: ['3', '무료 1시간할인', '215(이수열)', '2025-06-30 15:28:42.463', '']
2025-06-30 16:01:40,890 - INFO - [분석] 할인 데이터: 순번=[3] 할인값=[무료 1시간할인] 등록자=[215(이수열)] 시간=[2025-06-30 15:28:42.463]
2025-06-30 16:01:40,891 - INFO -    [매장] 우리 매장 할인: FREE_1HOUR - 215(이수열) (2025-06-30 15:28:42.463)
2025-06-30 16:01:40,891 - INFO - [분석] 할인 내역 분석 완료: 전체 3건, 우리 매장 3건
2025-06-30 16:01:40,892 - INFO - [분석] B 매장 쿠폰 현황 분석:
2025-06-30 16:01:40,892 - INFO -    [보유] 현재 보유 쿠폰: {'무료 1시간할인': {'car': 999, 'total': 999}, '유료 30분할인 (판매 : 300 )': {'car': 68, 'total': 68}}
2025-06-30 16:01:40,892 - INFO -    [매장] 우리 매장에서 적용한 쿠폰: {'PAID_30MIN': 2, 'FREE_1HOUR': 1}
2025-06-30 16:01:40,893 - INFO -    [전체] 총 적용 쿠폰 (전체): {'PAID_30MIN': 2, 'FREE_1HOUR': 1}
2025-06-30 16:01:40,895 - INFO - [B] discount_info: {'무료 1시간할인': {'car': 999, 'total': 999}, '유료 30분할인 (판매 : 300 )': {'car': 68, 'total': 68}}
2025-06-30 16:01:40,896 - INFO - [B] my_history: {'PAID_30MIN': 2, 'FREE_1HOUR': 1}
2025-06-30 16:01:40,896 - INFO - [B] total_history: {'PAID_30MIN': 2, 'FREE_1HOUR': 1}
2025-06-30 16:01:40,897 - INFO - [B] is_weekday: True
2025-06-30 16:01:40,903 - INFO - [B] calculate_required_coupons 성공! 결과: 2개
2025-06-30 16:01:40,904 - INFO - [B] 계산 결과: 무료 1시간할인 1개
2025-06-30 16:01:40,905 - INFO - [B] 계산 결과: 유료 30분할인 (판매 : 300 ) 4개
2025-06-30 16:01:40,905 - INFO - [B] >>>>>[적용할 쿠폰]
2025-06-30 16:01:40,906 - INFO - [B] 무료 1시간할인: 1개
2025-06-30 16:01:40,906 - INFO - [B] 유료 30분할인 (판매 : 300 ): 4개
2025-06-30 16:01:40,907 - INFO - [쿠폰] B 매장 쿠폰 적용 시작: {'무료 1시간할인': 1, '유료 30분할인 (판매 : 300 )': 4}
2025-06-30 16:01:40,908 - INFO - [디버그] 전달받은 쿠폰 키들: ['무료 1시간할인', '유료 30분할인 (판매 : 300 )']
2025-06-30 16:01:40,908 - INFO - [디버그] 쿠폰 '무료 1시간할인' 적용 시작: 1개
2025-06-30 16:01:40,909 - INFO - [쿠폰] FREE_1HOUR 쿠폰 적용 시작 (순서: 1)
2025-06-30 16:01:40,914 - INFO - [분석] 적용 전 할인내역 행 수: 1
2025-06-30 16:01:40,919 - INFO - [디버그] 무료 1시간할인 링크 수: 1
2025-06-30 16:01:41,965 - INFO - [액션] 무료 1시간할인 선택 완료
2025-06-30 16:01:45,752 - WARNING - [경고] 성공 팝업을 찾지 못했지만 계속 진행
2025-06-30 16:01:50,973 - WARNING - [경고] 할인내역 테이블 업데이트 확인 시간 초과
2025-06-30 16:01:50,974 - WARNING - [경고] 할인내역 테이블 업데이트 확인 실패, 하지만 계속 진행
2025-06-30 16:01:50,974 - INFO - [성공] 무료 1시간할인 1개 적용 완료
2025-06-30 16:01:50,975 - INFO - [디버그] 쿠폰 '유료 30분할인 (판매 : 300 )' 적용 시작: 4개
2025-06-30 16:01:50,975 - INFO - [쿠폰] PAID_30MIN 쿠폰 적용 시작 (순서: 1)
2025-06-30 16:01:50,980 - INFO - [분석] 적용 전 할인내역 행 수: 1
2025-06-30 16:01:50,986 - INFO - [디버그] 유료 30분할인 링크 수: 1
2025-06-30 16:02:22,005 - ERROR - [실패] PAID_30MIN 쿠폰 적용 중 오류: Timeout 30000ms exceeded.
2025-06-30 16:02:22,008 - ERROR - [실패] 유료 30분할인 1개 적용 실패
2025-06-30 16:02:22,012 - ERROR - [B] 자동화 실패: 쿠폰 적용 실패 | {"store_id": "B", "vehicle": "0280", "step": "쿠폰적용", "stack_trace": "Traceback (most recent call last):\n  File \"C:\\Code\\Project\\parking_cupon_auto\\PCA_250628\\core\\application\\use_cases\\apply_coupon_use_case.py\", line 118, in execute\n    raise Exception(\"쿠폰 적용 실패\")\nException: 쿠폰 적용 실패\n"}
2025-06-30 16:02:23,070 - INFO - 텔레그램 알림 전송 성공
2025-06-30 16:02:23,118 - INFO - 페이지 정리 완료
2025-06-30 16:02:23,299 - INFO - 브라우저 정리 완료
2025-06-30 16:02:23,311 - INFO - Playwright 정리 완료
